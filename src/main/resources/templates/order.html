<!doctype html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org" xmlns="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="msapplication-TileColor" content="#0061da">
    <meta name="theme-color" content="#1643a3">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <!-- Title -->
    <title>adminor – Clean & Modern Responsive Bootstrap 4 admin dashboard HTML5 Template.</title>
    <link rel="stylesheet" th:href="@{/assets/fonts/fonts/font-awesome.min.css}">

    <!-- Font Family -->
    <link th:href="@{https://fonts.googleapis.com/css?family=Lato:300,400,700,900}" rel="stylesheet">

    <!-- Sidemenu Css -->
    <link th:href="@{/assets/plugins/fullside-menu/css/style.css}" rel="stylesheet">
    <link th:href="@{/assets/plugins/fullside-menu/waves.min.css}" rel="stylesheet">

    <!-- Dashboard Css -->
    <link th:href="@{/assets/css/dashboard.css}" rel="stylesheet">

    <!-- c3.js Charts Plugin -->
    <link th:href="@{/assets/plugins/charts-c3/c3-chart.css}" rel="stylesheet">

    <!-- Custom scroll bar css-->
    <link th:href="@{/assets/plugins/scroll-bar/jquery.mCustomScrollbar.css}" rel="stylesheet">

    <!---Font icons-->
    <link th:href="@{/assets/css/icons.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/assets/plugins/sweet-alert/sweetalert.css}">
    <script th:src="@{/assets/plugins/sweet-alert/sweetalert.min.js}"></script>
    <!-- Dashboard js -->
    <script th:src="@{/assets/js/vendors/jquery-3.2.1.min.js}"></script>
    <script th:src="@{/assets/js/vendors/bootstrap.bundle.min.js}"></script>
    <script th:src="@{/assets/js/vendors/jquery.sparkline.min.js}"></script>
    <script th:src="@{/assets/js/vendors/selectize.min.js}"></script>
    <script th:src="@{/assets/js/vendors/selectize.min.js}"></script>
    <script th:src="@{/assets/js/vendors/circle-progress.min.js}"></script>
    <script th:src="@{/assets/plugins/rating/jquery.rating-stars.js}"></script>

    <!-- Fullside-menu Js-->
    <script th:src="@{/assets/plugins/fullside-menu/jquery.slimscroll.min.js}"></script>
    <script th:src="@{/assets/plugins/fullside-menu/waves.min.js}"></script>

    <!-- Custom scroll bar Js-->
    <script th:src="@{/assets/plugins/scroll-bar/jquery.mCustomScrollbar.concat.min.js}"></script>

    <!-- Custom Js-->
    <script th:src="@{/assets/js/custom.js}"></script>
    <script th:src="@{/assets/js/axios.js}"></script>
    <script th:src="@{/assets/js/md5.js}"></script>

    <!--dropzone的js和css文件 用于文件上传-->
    <link th:href="@{/assets/plugins/dropzone/dropzone.css}" rel="stylesheet">
    <script th:src="@{/assets/plugins/dropzone/dropzone.js}"></script>

    <script th:src="@{/assets/js/spark-md5.js}"></script>
    <script th:src="@{/assets/js/bootstrap.bundle.min.js}"></script>
    <link th:href="@{/assets/css/bootstrap.css}"/>

</head>
<body class="">
<div id="global-loader"></div>
<div class="page">
    <div class="page-main">
        <div class="app-header1 header py-1 d-flex">
            <div class="container-fluid">
                <div class="d-flex">
                    <a class="header-brand" href="index-1.html">
                        <img th:src="@{/assets/images/brand/logo.png}" class="header-brand-img"
                             alt="adminor logo">
                    </a>
                    <div class="menu-toggle-button">
                        <a class="nav-link wave-effect" href="#" id="sidebarCollapse">
                            <span class="fa fa-bars"></span>
                        </a>
                    </div>
                    <div class="d-flex order-lg-2 ml-auto header-right-icons header-search-icon">
                        <div class="p-2">
                            <form class="input-icon ">
                                <div class="input-icon-addon">
                                    <i class="fe fe-search"></i>
                                </div>
                                <input type="search" class="form-control header-search"
                                       placeholder="Search&hellip;" tabindex="1">
                            </form>
                        </div>

                        <div class="dropdown d-none d-md-flex">
                            <a class="nav-link icon full-screen-link nav-link-bg">
                                <i class="fa fa-expand" id="fullscreen-button"></i>
                            </a>
                        </div>

                        <div class="dropdown d-none d-md-flex">
                            <a class="nav-link icon" data-toggle="dropdown">
                                <i class="fa fa-bell-o"></i>
                                <span class="nav-unread bg-warning"></span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                <a href="#" class="dropdown-item d-flex pb-3">
                                    <div class="notifyimg">
                                        <i class="fa fa-thumbs-o-up"></i>
                                    </div>
                                    <div>
                                        <strong>Someone likes our posts.</strong>
                                        <div class="small text-muted">3 hours ago</div>
                                    </div>
                                </a>
                                <a href="#" class="dropdown-item d-flex pb-3">
                                    <div class="notifyimg">
                                        <i class="fa fa-commenting-o"></i>
                                    </div>
                                    <div>
                                        <strong> 3 New Comments</strong>
                                        <div class="small text-muted">5 hour ago</div>
                                    </div>
                                </a>
                                <a href="#" class="dropdown-item d-flex pb-3">
                                    <div class="notifyimg">
                                        <i class="fa fa-cogs"></i>
                                    </div>
                                    <div>
                                        <strong> Server Rebooted.</strong>
                                        <div class="small text-muted">45 mintues ago</div>
                                    </div>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item text-center">View all Notification</a>
                            </div>
                        </div>
                        <div class="dropdown d-none d-md-flex">
                            <a class="nav-link icon text-center" data-toggle="dropdown">
                                <i class="icon icon-speech"></i>
                                <span class=" nav-unread badge badge-info badge-pill">2</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                <a href="#" class="dropdown-item text-center">2 New Messages</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item d-flex pb-3">
                                            <span class="avatar brround mr-3 align-self-center cover-image"
                                                  data-image-src="assets/images/faces/male/41.jpg"></span>
                                    <div>
                                        <strong>Madeleine</strong> Hey! there I' am available....
                                        <div class="small text-muted">3 hours ago</div>
                                    </div>
                                </a>
                                <a href="#" class="dropdown-item d-flex pb-3">
                                            <span class="avatar brround mr-3 align-self-center cover-image"
                                                  data-image-src="assets/images/faces/female/1.jpg"></span>
                                    <div>
                                        <strong>Anthony</strong> New product Launching...
                                        <div class="small text-muted">5 hour ago</div>
                                    </div>
                                </a>
                                <a href="#" class="dropdown-item d-flex pb-3">
                                            <span class="avatar brround mr-3 align-self-center cover-image"
                                                  data-image-src="assets/images/faces/female/18.jpg"></span>
                                    <div>
                                        <strong>Olivia</strong> New Schedule Realease......
                                        <div class="small text-muted">45 mintues ago</div>
                                    </div>
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item text-center">See all Messages</a>
                            </div>
                        </div>
                        <div class="dropdown d-none d-md-flex ">
                            <a class="nav-link icon " data-toggle="dropdown">
                                <i class="fe fe-grid floating"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                                <ul class="drop-icon-wrap p-1">
                                    <li>
                                        <a href="email.html" class="drop-icon-item">
                                            <i class="fe fe-mail text-dark"></i>
                                            <span class="block"> E-mail</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="calendar2.html" class="drop-icon-item">
                                            <i class="fe fe-calendar text-dark"></i>
                                            <span class="block">calendar</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="maps.html" class="drop-icon-item">
                                            <i class="fe fe-map-pin text-dark"></i>
                                            <span class="block">map</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="cart.html" class="drop-icon-item">
                                            <i class="fe fe-shopping-cart text-dark"></i>
                                            <span class="block">Cart</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="chat.html" class="drop-icon-item">
                                            <i class="fe fe-message-square text-dark"></i>
                                            <span class="block">chat</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="profile.html" class="drop-icon-item">
                                            <i class="fe fe-phone-outgoing text-dark"></i>
                                            <span class="block">contact</span>
                                        </a>
                                    </li>
                                </ul>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item text-center">View all</a>
                            </div>
                        </div>
                        <div class="dropdown text-center selector">
                            <a href="#" class="nav-link leading-none" data-toggle="dropdown">
                                        <span id="head_img_1" class="avatar avatar-sm brround"
                                              th:style="'background-image: url(' + ${loginUser.headImg} + ')'"></span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow ">
                                <div class="text-center">
                                    <a href="#" class="dropdown-item text-center font-weight-sembold user"
                                       data-toggle="dropdown" th:text="${loginUser.username}"></a>
                                    <span class="text-center user-semi-title text-dark"
                                          th:text="${loginUser.email}"></span>
                                    <div class="dropdown-divider"></div>
                                </div>
                                <a class="dropdown-item" th:href="@{'/user/getLoginUserInfo'}">
                                    <i class="dropdown-icon mdi mdi-account-outline"></i> 个人中心
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="dropdown-icon  mdi mdi-settings"></i> 预留选项
                                </a>
                                <a class="dropdown-item" href="#">
                                    <span class="float-right"><span class="badge badge-primary">6</span></span>
                                    <i class="dropdown-icon mdi  mdi-message-outline"></i> 预留选项
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="dropdown-icon mdi mdi-comment-check-outline"></i> 预留选项
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#">
                                    <i class="dropdown-icon mdi mdi-compass-outline"></i> 需要帮助?
                                </a>
                                <a class="dropdown-item" th:href="@{/user/logout}">
                                    <i class="dropdown-icon mdi  mdi-logout-variant"></i> 登出
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="wrapper">
            <!-- Sidebar Holder -->
            <nav id="sidebar" class="nav-sidebar">
                <ul class="list-unstyled components" id="accordion">
                    <div class="user-profile">
                        <div class="dropdown user-pro-body">
                            <div>
                                <!-- <img th:src="@{${session.loginUser.headImg}}" alt="user-img" class="img-circle">-->
                                <span class="avatar avatar-sm brround"
                                      th:style="'background-image: url(' + ${loginUser.headImg} + ')'"></span>
                            </div>
                            <div class="mb-2"><a href="#" class="" data-toggle="" aria-haspopup="true"
                                                 aria-expanded="false"> <span class="font-weight-semibold"
                                                                              th:text="${loginUser.username}"></span>
                            </a>
                                <br><span class="text-gray" th:text="${loginUser.email}"></span>
                            </div>
                        </div>
                    </div>

                    <li class="">
                        <a th:href="@{'/user/getLoginUserInfo'}" class="wave-effect">
                            <i class="fa fa-desktop mr-2"></i> 个人信息
                        </a>
                    </li>
                    <li class="">
                        <a href="#Apps" class="wave-effect">
                            <i class="fa fa-snowflake-o mr-2"></i> 个人空间
                        </a>
                    </li>
                    <li>
                        <a th:href="@{/order/myOrder}" class="wave-effect">
                            <i class="fa fa-area-chart mr-2"></i> 订单列表
                        </a>
                    </li>
                    <!--                    <li class="">-->
                    <!--                        <a href="#Uielements" class="wave-effect">-->
                    <!--                            <i class="mdi mdi-buffer mr-2"></i> 观看历史-->
                    <!--                        </a>-->

                    <!--                    </li>-->
                    <li class="">
                        <a href="#Uidesign" class="wave-effect">
                            <i class="fa fa-tachometer mr-2"></i> 我的收藏
                        </a>

                    </li>
                    <li>
                        <a href="widgets.html" class="wave-effect">
                            <i class="fa fa-cubes mr-2"></i> 购物车
                        </a>
                    </li>
                    <!--                    <li class="">-->
                    <!--                        <a href="#pages" class="wave-effect">-->
                    <!--                            <i class="mdi mdi-file mr-2"></i> 成为创作者-->
                    <!--                        </a>-->

                    <!--                    </li>-->
                    <!--                    <li class="">-->
                    <!--                        <a href="#Forms" class="wave-effect">-->
                    <!--                            <i class="mdi mdi-arrange-send-backward mr-2"></i> 视频投稿-->
                    <!--                        </a>-->

                    <!--                    </li>-->
                    <!--                    <li class="">-->
                    <!--                        <a href="#Submenu1" class="wave-effect">-->
                    <!--                            <i class="fa fa-calendar mr-2"></i> 稿件管理-->
                    <!--                        </a>-->

                    <!--                    </li>-->
                    <!--                    <li class="">-->
                    <!--                        <a href="#Icons" class="wave-effect">-->
                    <!--                            <i class="fa fa-bandcamp mr-2"></i> 创作中心-->
                    <!--                        </a>-->
                    <!--                    </li>-->
                </ul>
            </nav>
            <div class="col-lg-12 col-xl-8 col-md-12">
                <div class="card ">
                    <div class="card-header">
                        <h5 class="card-title">订单列表(订单有效期为30分钟，请及时支付)</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped card-table table-condensed mt-0 table-nowrap border">
                                <thead>
                                <tr>
                                    <th>订单编号</th>
                                    <th>商品名</th>
                                    <th>价格</th>
                                    <th>下单时间</th>
                                    <th>订单状态</th>
                                    <th>去支付</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="orderGoodsDTO : ${orderDTOList}">
                                    <td th:text="${orderGoodsDTO.order.id}"></td>
                                    <td th:text="${orderGoodsDTO.goods.name}"></td>
                                    <td th:text="${orderGoodsDTO.goods.price}"></td>
                                    <td th:text="${#dates.format(orderGoodsDTO.order.createTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                                    <td>
                                        <span th:if="${orderGoodsDTO.order.status == 0}" class="badge badge-primary">未支付</span>
                                        <span th:if="${orderGoodsDTO.order.status == 1}" class="badge badge-success">已支付</span>
                                        <span th:if="${orderGoodsDTO.order.status == 2}" class="badge badge-warning">已取消</span>

<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.id}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.username}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.updateTime}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.id}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.id}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.id}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.id}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user.id}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
<!--                                        <input type="hidden" th:value="${orderGoodsDTO.order.user}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">-->
                                        <input type="hidden" th:value="${orderGoodsDTO.order.createTime}" th:id="'orderCreateTime-' + ${orderGoodsDTO.order.id}">
                                        <input type="hidden" th:value="${orderGoodsDTO.order.goodsId}" th:id="'orderGoodsId-' + ${orderGoodsDTO.order.id}">
                                        <input type="hidden" th:value="${jsonUser}" th:id="'orderUser-' + ${orderGoodsDTO.order.id}">
                                        <input type="hidden" th:value="${orderGoodsDTO.order.payTime}" th:id="'orderPayTime-' + ${orderGoodsDTO.order.id}">
                                        <input type="hidden" th:value="${orderGoodsDTO.order.status}" th:id="'orderStatus-' + ${orderGoodsDTO.order.id}">
                                        <script src="">
                                            let user = document.getElementById('orderUser-522184');
                                            console.log('user:' + user);
                                            let createTime = document.getElementById('orderCreateTime-522184');
                                            console.log('createTime:' +createTime);
                                        </script>
                                    </td>
                                    <td>
                                        <option th:if="${orderGoodsDTO.order.status == 0}" th:attr="onclick='doPay(' + ${orderGoodsDTO.order.id} + ')'">去支付</option>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="pagination">
                                <ul class="pagination">
                                    <li th:classappend="${currentPage > 0 ? 'page-item' : 'page-item disabled'}">
                                        <a th:href="@{/order/myOrder(page=${currentPage - 1}, size=${size})}" class="page-link">&laquo;</a>
                                    </li>
                                    <li th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                                        th:classappend="${currentPage == i ? 'page-item active' : 'page-item'}">
                                        <a th:href="@{/order/myOrder(page=${i}, size=${size})}" class="page-link" th:text="${i + 1}"></a>
                                    </li>
                                    <li th:classappend="${currentPage < totalPages - 1 ? 'page-item' : 'page-item disabled'}">
                                        <a th:href="@{/order/myOrder(page=${currentPage + 1}, size=${size})}" class="page-link">&raquo;</a>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>
            </div>




        </div>
    </div>

    <!--footer-->
    <footer class="footer">
        <div class="container">
            <div class="row align-items-center flex-row-reverse">
                <div class="col-lg-12 col-sm-12 mt-3 mt-lg-0 text-center">
                    Copyright © 2018 <a href="http://www.bootstrapmb.com/" title="bootstrapmb">adminor</a>.
                    Designed by <a href="#">Spruko</a> All rights reserved.
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer-->
</div>

<!-- Back to top -->
<a href="#top" id="back-to-top" style="display: inline;"><i class="fa fa-angle-up"></i></a>

<script>
function doPay(orderId){
    let orderUser = document.getElementById('orderUser-' + orderId);
    let orderGoodsId = document.getElementById('orderGoodsId-' + orderId);
    let orderStatus = document.getElementById('orderStatus-' + orderId);
    let orderPayTime = document.getElementById('orderPayTime-' + orderId);
    let orderCreateTime = document.getElementById('orderCreateTime-' + orderId);
    let order = {
        id: orderId,
        user: orderUser.value,
        goodsId: orderGoodsId.value,
        status: orderStatus.value,
        orderCreateTime: orderCreateTime.value,
        orderPayTIme: orderPayTime.value
    };
    axios({
        method: 'POST',
        url: '/order/doPay',
        data: order
    }).then(function (response) {
        if (response.data.status === 'SUCCESS') {
            swal(response.data.message, '', 'success');
        } else {
            swal(response.data.message, '', 'error');
        }
        location.href = '/order/myOrder';
    })
}
</script>


</body>
</html>


